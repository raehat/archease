<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Example</title>
</head>
<body>
<!--<script type="text/javascript">-->
<!--    function sum() {-->
<!--        return 5-->
<!--    }-->
<!--</script>-->
<script type="module">
        import { ArchwayClient } from './node_modules/@archwayhq/arch3.js'
        import { DirectSecp256k1HdWallet } from './node_modules/@cosmjs/proto-signing'

        const network = {
          chainId: 'constantine-3',
          endpoint: 'https://rpc.constantine.archway.io',
          prefix: 'archway',
        };

        function sum() {
            return 5
            if (window.AndroidInterface) {
                window.AndroidInterface.onResult(result);
            }
        }

        window.sum = sum;

        async function sendPayment(mnemonic, receiver) {
            const wallet = await DirectSecp256k1HdWallet.fromMnemonic(mnemonic, { prefix: network.prefix });
            const client = await SigningArchwayClient.connectWithSigner(network.endpoint, wallet);

            const contractAddress = 'archway1aw33ujp5nevaz4dm4vslrlvnnl78ssq85nultv2s5lax2kyp3cjqku076t';
            const msg = {
              send_payment: {
                receiver: receiver,
                time_ahead: 10000
              }
            }

            const { transactionHash } = await client.execute(
                accounts[0].address,
                contractAddress,
                msg,
                "auto",
                "",
                [{ denom: 'aconst', amount: '100000000' }]
              );

              console.log("Transaction Hash: ", transactionHash);
              return transactionHash

        }

        async function revertPayment(mnemonic, payment_id) {
            const wallet = await DirectSecp256k1HdWallet.fromMnemonic(mnemonic, { prefix: network.prefix });
            const client = await SigningArchwayClient.connectWithSigner(network.endpoint, wallet);

            const contractAddress = 'archway1aw33ujp5nevaz4dm4vslrlvnnl78ssq85nultv2s5lax2kyp3cjqku076t';
            const msg = {
              revert_payment: {
                payment_id: payment_id
              }
            }

            const { transactionHash } = await client.execute(
                accounts[0].address,
                contractAddress,
                msg,
                "auto",
                "",
                [{ denom: 'aconst', amount: '100000000' }]
              );

              console.log("Transaction Hash: ", transactionHash);
              return transactionHash

        }

        async function claimPayment(payment_id) {
            const wallet = await DirectSecp256k1HdWallet.fromMnemonic(mnemonic, { prefix: network.prefix });
            const client = await SigningArchwayClient.connectWithSigner(network.endpoint, wallet);

            const contractAddress = 'archway1aw33ujp5nevaz4dm4vslrlvnnl78ssq85nultv2s5lax2kyp3cjqku076t';
            const msg = {
              claim_payment: {
                payment_id: payment_id
              }
            }

            const { transactionHash } = await client.execute(
                accounts[0].address,
                contractAddress,
                msg,
                "auto",
                "",
                [{ denom: 'aconst', amount: '100000000' }]
              );

              console.log("Transaction Hash: ", transactionHash);
              return transactionHash

        }
    </script>
</body>
</html>
